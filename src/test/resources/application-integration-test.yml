server:
  port: ${PORT:8085}
  shutdown: graceful

spring:
  application:
    name: trade-commodity-codes
  lifecycle:
    timeout-per-shutdown-phase: 30s
  datasource:
    username: postgres
    password: postgres
    ssl:
      enabled: false
  liquibase:
    change-log: classpath:integration/migrations.xml
    enabled: true
    user: postgres
    password: postgres

# CDP platform configuration
cdp:
  environment: ${ENVIRONMENT:local}
  service-version: ${SERVICE_VERSION:0.0.0-local}
  tracing:
    header-name: ${TRACING_HEADER:x-cdp-request-id}
  proxy:
    url: ${HTTP_PROXY:}

# AWS configuration
aws:
  rds:
    iam:
      enabled: false
  region: ${AWS_REGION:eu-west-2}
  emf:
    enabled: ${AWS_EMF_ENABLED:false}
    environment: ${AWS_EMF_ENVIRONMENT:Local}
    namespace: ${AWS_EMF_NAMESPACE:}
    service:
      name: ${AWS_EMF_SERVICE_NAME:trade-commodity-codes}
      type: ${AWS_EMF_SERVICE_TYPE:SpringBootApp}

# Logging configuration
logging:
  level:
    root: INFO
    uk.gov.defra.cdp.trade.demo: INFO
    uk.gov.defra.cdp.trade.demo.common.metrics: INFO
    org.springframework: INFO
    org.springframework.web: DEBUG
    liquibase: DEBUG

# Actuator endpoints
# Production: Only health endpoint exposed (secure by default)
management:
  endpoints:
    web:
      base-path: /
      exposure:
        include: health
  endpoint:
    health:
      show-details: never
  info:
    env:
      enabled: true

# Application info (exposed via /info endpoint)
info:
  app:
    name: ${spring.application.name}
    version: ${cdp.service-version}
    environment: ${cdp.environment}
